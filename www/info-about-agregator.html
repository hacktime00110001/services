<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<meta property="og:title" content="TaxiTime"> 
		<meta name="description" content="">
		<meta property="og:description" content=""> 
		<meta name="twitter:title" content="TaxiTime">
		<meta name="twitter:description" content="">

		<meta property="og:image" content="./imgs/favicon.jpg">
		<meta property="og:type" content="website">
		<meta property="og:url" content="">
		<meta property="og:site_name" content="SixTouchesTTaxiTimeeam">

		<link rel="shortcut icon" type="shortcut icon" href="./imgs/favicon.jpg">

		<link rel="stylesheet" href="./libs/bootstrap.min.css"> 

		<link rel="stylesheet" href="./css/fonts.css">
		<link rel="stylesheet" href="./css/main.css">
				
		<title>TaxiTime</title>
		
	</head>
<body ontouchstart="">
	   
	<header>
		<div class="container">
			<div class="row flex-column align-items-center">
				<div class="analyticsTitle">
					<img src="./imgs/registrationLogo.png" alt="TxT">
					<p class="mr-3"></p>
					<a href="homepage.html">
						<img class="back_to_homepage" src="./imgs/arrow_back.png" alt="Profile">
					</a>
				</div>
			</div>
		</div>
	</header>
	
	<main>
		<div class="container">
			<div class="row flex-column align-items-center" id="main_content">
				<div class="w-100 d-flex justify-content-center">
					<input id="agregatorSearchBtn" type="button" class="driverProfile_OrangeBtn w-130 mb-0 back_search">
					<div class="w-50 w-20_350"></div>
					<input data-toggle="modal" data-target="#modalFilter" type="button" class="driverProfile_OrangeBtn w-130 mb-0 back_filter">
				</div>
				<div class="w-100 d-flex justify-content-center">
					<form id="agregatorSearchContainer" class="argeratorSearch_Cont" method="post">
						<input class="argeratorSearch_input" type="text" placeholder="Поиск партнера" id="search">
						<input value type="button" class="argeratorSearch_Submit driverProfile_OrangeBtn w-43 mb-0 mt-0 back_search" id="searchSub">
					</form>
				</div>
				<div class="row w-100 search_result">
					<p>По Вашему запросу найдено <b id="count-of-record">#</b> партнёров</p>
				</div>
				<div class="row w-100 p-15" id="contentPartners"></div>
				<input onclick="window.location.href='homepage.html'" type="button" class="driverProfile_OrangeBtn max-w-275 mt-15 mb-26" value="Назад">
			</div>
		</div>
	</main>  

	<!-- Modal -->
	<div class="modal fade" id="modalFilter" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	  <div class="modal-dialog modalFilter-dialog" role="document">
		<div class="modal-content modalThx-content">
		  <div class="modal-body">
			  <input type="button" class="close modalThx_closeBtn" data-dismiss="modal" aria-label="Close">
			  <p class="fw_bold fs_16 text-center">Фильтр</p>
			  <form class="w-100 d-flex flex-column">
				  <p class="fw_bold">Комиссии:</p>
				  <div class="d-flex">
					  <div class="d-flex align-items-center mr-3">
						  <div class="checkboxWhiteDiv checkboxWhiteOn">
							  <input class="numberCheakBox commission_data" type="checkbox" value="1" checked="checked" onclick="logincheckboxCheck(this);"/>
						  </div>
						  <p class="fw_medium fs_11 mt-1">1%</p>
					  </div>
					  <div class="d-flex align-items-center mr-3">
						  <div class="checkboxWhiteDiv checkboxWhiteOn">
							  <input class="numberCheakBox commission_data" type="checkbox" value="2" checked="checked" onclick="logincheckboxCheck(this);"/>
						  </div>
						  <p class="fw_medium fs_11 mt-1">2%</p>
					  </div>
					  <div class="d-flex align-items-center mr-3">
						  <div class="checkboxWhiteDiv checkboxWhiteOn">
							  <input class="numberCheakBox commission_data" type="checkbox" value="3" checked="checked" onclick="logincheckboxCheck(this);" />
						  </div>
						  <p class="fw_medium fs_11 mt-1">3%</p>
					  </div>
					  <div class="d-flex align-items-center mr-3">
						  <div class="checkboxWhiteDiv checkboxWhiteOn">
							  <input class="numberCheakBox commission_data" type="checkbox" value="4" checked="checked" onclick="logincheckboxCheck(this);" />
						  </div>
						  <p class="fw_medium fs_11 mt-1">4%</p>
					  </div>
					  <div class="d-flex align-items-center mr-3">
						  <div class="checkboxWhiteDiv checkboxWhiteOn">
							  <input class="numberCheakBox commission_data" type="checkbox" value="5" checked="checked" onclick="logincheckboxCheck(this);" />
						  </div>
						  <p class="fw_medium fs_11 mt-1">5%</p>
					  </div>
					  <div class="d-flex align-items-center">
						  <div class="checkboxWhiteDiv checkboxWhiteOn">
							  <input class="numberCheakBox commission_data" type="checkbox" value="6" checked="checked" onclick="logincheckboxCheck(this);" />
						  </div>
						  <p class="fw_medium fs_11 mt-1">6%</p>
					  </div>
				  </div>
				  <p class="fw_bold mt-15">Системы выплат:</p>
				  <div class="d-flex flex-column">
					  <div class="d-flex align-items-center mr-3">
						  <div class="checkboxWhiteDiv checkboxWhiteOn">
							  <input id="MOZEN" class="numberCheakBox pay_systems" type="checkbox" value="MOZEN" checked="checked" onclick="logincheckboxCheck(this);"/>
						  </div>
						  <label class="mb-0" for="MOZEN">
							  <p class="fw_medium fs_11 mt-1 ml-1">MOZEN</p>
						  </label>
					  </div>
					  <div class="d-flex align-items-center mr-3">
						  <div class="checkboxWhiteDiv checkboxWhiteOn">
							  <input id="YANDEX" class="numberCheakBox pay_systems" type="checkbox" value="QIWI" checked="checked" onclick="logincheckboxCheck(this);" />
						  </div>
						  <label class="mb-0" for="YANDEX">
							  <p class="fw_medium fs_11 mt-1 ml-1">QIWI</p>
						  </label>
					  </div>
					  <div class="d-flex align-items-center mr-3">
						  <div class="checkboxWhiteDiv checkboxWhiteOn">
							  <input id="QIWI" class="numberCheakBox pay_systems" type="checkbox" value="MOMENTUM" checked="checked" onclick="logincheckboxCheck(this);" />
						  </div>
						  <label class="mb-0" for="QIWI">
							  <p class="fw_medium fs_11 mt-1 ml-1">MOMENTUM</p>
						  </label>
					  </div>
					  <div class="d-flex align-items-center mr-3">
						  <div class="checkboxWhiteDiv checkboxWhiteOn">
							  <input id="QIWI" class="numberCheakBox pay_systems" type="checkbox" value="none" checked="checked" onclick="logincheckboxCheck(this);" />
						  </div>
						  <label class="mb-0" for="QIWI">
							  <p class="fw_medium fs_11 mt-1 ml-1">Отсутсвует</p>
						  </label>
					  </div>
				  </div>
				  <p class="fw_bold mt-15">Каналы тех. поддержки:</p>
				  <div class="d-flex mt-10">
					  <div class="col30pr">
						  <div class="d-flex align-items-center mr-3">
							  <div class="checkboxWhiteDiv checkboxWhiteOn">
								  <input id="filterPhone" class="numberCheakBox support_channels" type="checkbox" value="Phone" checked="checked" onclick="logincheckboxCheck(this);" />
							  </div>
							  <label class="mb-0" for="filterPhone">
								  <img src="./imgs/channel_phone.png" alt="Phone">
							  </label>
						  </div>
					  </div>
					  <div class="col30pr">
						  <div class="d-flex align-items-center mr-3">
							  <div class="checkboxWhiteDiv checkboxWhiteOn">
								  <input id="filterTelegram" class="numberCheakBox support_channels" type="checkbox" value="Telegram" checked="checked" onclick="logincheckboxCheck(this);" />
							  </div>
							  <label class="mb-0" for="filterTelegram">
								  <img src="./imgs/channel_telegram.png" alt="Telegram">
							  </label>
						  </div>
					  </div>
					  <div class="col30pr">
						  <div class="d-flex align-items-center mr-3">
							  <div class="checkboxWhiteDiv checkboxWhiteOn">
								  <input id="filterViber" class="numberCheakBox support_channels" type="checkbox" value="Viber" checked="checked" onclick="logincheckboxCheck(this);" />
							  </div>
							  <label class="mb-0" for="filterViber">
								  <img src="./imgs/channel_viber.png" alt="Viber">
							  </label>
						  </div>
					  </div>
				  </div>
				  <div class="d-flex mt-15">
					  <div class="col30pr">
						  <div class="d-flex align-items-center mr-3">
							  <div class="checkboxWhiteDiv checkboxWhiteOn">
								  <input id="filterWhatsApp" class="numberCheakBox support_channels" type="checkbox" value="WhatsApp" checked="checked" onclick="logincheckboxCheck(this);" />
							  </div>
							  <label class="mb-0" for="filterWhatsApp">
								  <img src="./imgs/channel_whatsapp.png" alt="WhatsApp">
							  </label>
						  </div>
					  </div>
					  <div class="col30pr">
						  <div class="d-flex align-items-center mr-3">
							  <div class="checkboxWhiteDiv checkboxWhiteOn">
								  <input id="filterVk" class="numberCheakBox support_channels" type="checkbox" value="VK" checked="checked" onclick="logincheckboxCheck(this);" />
							  </div>
							  <label class="mb-0" for="filterVk">
								  <img src="./imgs/channel_vk.png" alt="VK">
							  </label>
						  </div>
					  </div>
					  <div class="col30pr">
						  <div class="d-flex align-items-center mr-3">
							  <div class="checkboxWhiteDiv checkboxWhiteOn">
								  <input id="filterMessage" class="numberCheakBox support_channels" type="checkbox" value="Mail" checked="checked" onclick="logincheckboxCheck(this);"/>
							  </div>
							  <label class="mb-0" for="filterMessage">
								  <img src="./imgs/channel_message.png" alt="Mail">
							  </label>
						  </div>
					  </div>
				  </div>
				  <p class="fw_bold mt-15 mb-5">Рейтинг партнера:</p>
				  <div class="d-flex">
					  <label class="radioContainer">любой
						  <input type="radio" name="partners_rate" class="rating_partners" id="default_radio1" value="0.0" checked>
						  <span class="checkmark"></span>
					  </label>
					  <label class="radioContainer">более 3-х
						  <input type="radio" name="partners_rate" class="rating_partners" value="3.0">
						  <span class="checkmark"></span>
					  </label>
					  <label class="radioContainer">более 4-х
						  <input type="radio" name="partners_rate" class="rating_partners" value="4.0">
						  <span class="checkmark"></span>
					  </label>
				  </div>
				  <p class="fw_bold mt-15 mb-5">Парковые автомобили:</p>
				  <div class="d-flex">
					  <label class="radioContainer" style="margin-right: 35px;">все
						  <input type="radio" name="partners_park_Auto" id="default_radio2" class="park_cars" value="any" checked>
						  <span class="checkmark"></span>
					  </label>
					  <label class="radioContainer" style="margin-right: 59px;"><img src="./imgs/parkCar_yes.png" alt="Message">
						  <input type="radio" name="partners_park_Auto" class="park_cars" value="isset">
						  <span class="checkmark"></span>
					  </label>
					  <label class="radioContainer"><img src="./imgs/parkCar_no.png" alt="Message">
						  <input type="radio" name="partners_park_Auto" class="park_cars" value="none">
						  <span class="checkmark"></span>
					  </label>
				  </div>
				  <div class="d-flex justify-content-between">
					  <input type="button" class="driverProfile_OrangeBtn w-130 w-120_340 mb-10 fs_12" id="find_by_filter" value="Применить">
					  <input type="button" class="driverProfile_OrangeBtn w-130 w-120_340 mb-10 fs_12" id="clean_filter" value="Очистить фильтр">
				  </div>
			  </form>
		  </div>
		</div>
	  </div>
	</div>
	<script type="text/javascript" src="./libs/jquery.min.js"></script>
	<script type="text/javascript" src="./libs/bootstrap.min.js"></script>

	<script type="text/javascript" src="./js/modal.js"></script>
	
	<script>
		$store = localStorage;


		$.post("http://taxitime.pro/api/MainData.php", { 
			getInfoAboutAgregator: $store.getItem("lastVisitAgregator")
		}).done(function (data) {
			var agregatordata = JSON.parse(data);
			$content = $("#contentPartners");

			$(".analyticsTitle p").html(agregatordata[0].name);
			if(agregatordata[1].length != 0) { 
				for(i = 0; i < agregatordata[1].length; i++) {
					$content.append('<div class="w-100 p-5"><a href="./info-about-partner.html" data-parnter-id='+agregatordata[1][i].id+'><div class="analyticsBox"><div class="w-100 d-flex align-items-center justify-content-between"><p class="agregatorBox_name">'+agregatordata[1][i].name+'</p><p class="agregatorBox_rating">Рейтинг: <span id="reting" class="reting">'+agregatordata[1][i].rating+'</span></p></div><div class="w-100 row justify-content-between p-10"><div class="agregatorBox_conditions"><p class="agregatorBox_title">Условия работы</p><div class="agregatorBox_hr"></div><ul><li><img class="w-9 h-10 mr-10 mt-3" src="./imgs/agreratorBox_li.png" alt="&#10004;"><p class="fw_bold fs_20"><span>Комиссия парка - </span>'+agregatordata[1][i].park_commission+' %</p></li><li><img class="w-9 h-10 mr-10" src="./imgs/agreratorBox_li.png" alt="&#10004;"><div><p><span>Выплаты:</span></p><ul><li><p>'+agregatordata[1][i].payment_types+'</p></li></ul></div></li><li class="d-flex flex-column"><div class="d-flex"><img class="w-9 h-10 mr-10" src="./imgs/agreratorBox_li.png" alt="&#10004;"><p><span>Каналы тех. поддержки:</span></p></div><div class="agreratorBox_supportImgs" data-imgs-id=\''+i+'\'></div></li><li><img class="w-9 h-10 mr-10" src="./imgs/agreratorBox_li.png" alt="&#10004;"><p class="w-60"><span>Парковые автомобили:</span></p><div class="parkCar_Imgs" data-cars-id=\''+i+'\'></div></li></ul></div><div class="agregatorBox_agregators"><p class="agregatorBox_title">Агрегаторы</p><div class="agregatorBox_hr"></div><div class="row agregatorBox_agregatorsList" id="agregatorBox_agregatorsList" data-agregators-id=\''+i+'\'></div></div></div><input type="button" class="driverProfile_OrangeBtn max-w-275 mt-0 mb-5" value="Перейти"></div></a></div>');
					
					$chanelsContent = $(".agreratorBox_supportImgs[data-imgs-id='"+i+"']");
					for(j = 0; j < agregatordata[1][i][0].support_channels.length; j++)
						$chanelsContent.append("<img src='"+agregatordata[1][i][0].support_channels[j].logo_url+"' alt='"+agregatordata[1][i][0].support_channels[j].name+"'>");
					
					$cars = agregatordata[1][i].park_cars.split(";");
					if($cars[0] == "none")
						$(".parkCar_Imgs[data-cars-id='"+i+"']").append("<img src='./imgs/parkCar_no.png' alt='No'>");
					else
						$(".parkCar_Imgs[data-cars-id='"+i+"']").append("<img src='./imgs/parkCar_yes.png' alt='Yes'>");

					$agregatorsContent = $("#agregatorBox_agregatorsList[data-agregators-id='"+i+"']");
					for(j = 0; j < agregatordata[1][i][1].some_info_agregators.length; j++)
						$agregatorsContent.append("<div class='col30pr'><img src='"+agregatordata[1][i][1].some_info_agregators[j].logo_url+"' alt='"+agregatordata[1][i][1].some_info_agregators[j].name+"'></div>");
					
				}
			} else {
				$("#main_content").html('<div class="row analyticsContainer" style="height: 100vh;display: flex;align-content: center;"><h2 style="color: #333333; text-align: center;">У данного агрегатора нет партнеров!</h2></div>');
			}

			$("a").click(function () {
                attrValue = $(this).attr('data-parnter-id');
                if(attrValue != undefined) {
                    $store.setItem("lastVisitPartner", attrValue);
                }
            });

            retingUpdate();

		}).fail(function(xhr, textStatus, error) {
			modal_alert("Server error!", 2, "xhr.statusText: " + xhr.statusText + "<br>textStatus: " + textStatus + "<br>error: " + error + "<br>");
		});

	</script>

	<script>
		$("#agregatorSearchBtn").on("click", function() {
			$("#agregatorSearchContainer").fadeToggle("slow", "linear");
		}); 
		function logincheckboxCheck (inp) {
			inp.parentElement.classList.toggle("checkboxWhiteOff");
			inp.parentElement.classList.toggle("checkboxWhiteOn");
		}
	</script>

	<script type="text/javascript">
		function retingUpdate() {
			$high = "agrBox_rateGreen";
			$medium = "agrBox_rateYellow";
			$low = "agrBox_rateRed";

			$retingsBlock = document.querySelectorAll(".reting");
			$parents = document.querySelectorAll(".agregatorBox_rating");
			
			for(q = 0; q < $retingsBlock.length; q++) {
				$reting = parseFloat($retingsBlock[q].innerHTML);
				if($reting >= 4.5 && $reting <= 5.0)
					$parents[q].classList.add($high);
				else if($reting >= 4.0 && $reting < 4.5)
			 		$parents[q].classList.add($medium);
				else 
			 		$parents[q].classList.add($low);
			}
		}

	</script>

	<script type="text/javascript">
		$("#clean_filter").click(function () {
			$("input[type='radio']").prop("checked", false);
			$("#default_radio1").prop("checked", true);
			$("#default_radio2").prop("checked", true);
			$("input[type='checkbox']").parent().removeClass("checkboxWhiteOff");
			$("input[type='checkbox']").parent().addClass("checkboxWhiteOn");
			$("input[type='checkbox']").prop("checked", true);
		});
	</script>

	<script type="text/javascript">
		$("#searchSub").click(function () {
			var searchRessultDiv = $(".search_result");
			var countOfRecordComponent = $("#count-of-record");
			var contentDiv = $("#contentPartners");
			var inputSearchData = $("#search").val();

			if(inputSearchData.replace(/\s+/g, '') == " " || inputSearchData.replace(/\s+/g, '') == "") {
				modal_alert("Ошибка поиска!", 1, "В поиск ничего не введено!");
			} else {

				$.post("http://taxitime.pro/api/MainData.php", { 
					searchData: inputSearchData.replace(/\s+/g, ''),
					agregatorId: $store.getItem("lastVisitAgregator")
				}).done(function (data) {
					contentDiv.html("");

					searchRessultDiv.css("display", "block");

					var searchResultData = JSON.parse(data);

					searchRessultDiv.html('<p>По Вашему запросу найдено <b id="count-of-record">#</b> партнёров</p>');
					countOfRecordComponent = $("#count-of-record");

					countOfRecordComponent.html(searchResultData[0].length);

					if(searchResultData[0].length != 0) { 
						for(i = 0; i < searchResultData[0].length; i++) {
							contentDiv.append('<div class="w-100 p-5"><a href="./info-about-partner.html" data-parnter-id='+searchResultData[0][i].id+'><div class="analyticsBox"><div class="w-100 d-flex align-items-center justify-content-between"><p class="agregatorBox_name">'+searchResultData[0][i].name+'</p><p class="agregatorBox_rating">Рейтинг: <span id="reting" class="reting">'+searchResultData[0][i].rating+'</span></p></div><div class="w-100 row justify-content-between p-10"><div class="agregatorBox_conditions"><p class="agregatorBox_title">Условия работы</p><div class="agregatorBox_hr"></div><ul><li><img class="w-9 h-10 mr-10 mt-3" src="./imgs/agreratorBox_li.png" alt="&#10004;"><p class="fw_bold fs_20"><span>Комиссия парка - </span>'+searchResultData[0][i].park_commission+' %</p></li><li><img class="w-9 h-10 mr-10" src="./imgs/agreratorBox_li.png" alt="&#10004;"><div><p><span>Выплаты:</span></p><ul><li><p>'+searchResultData[0][i].payment_types+'</p></li></ul></div></li><li class="d-flex flex-column"><div class="d-flex"><img class="w-9 h-10 mr-10" src="./imgs/agreratorBox_li.png" alt="&#10004;"><p><span>Каналы тех. поддержки:</span></p></div><div class="agreratorBox_supportImgs" data-imgs-id=\''+i+'\'></div></li><li><img class="w-9 h-10 mr-10" src="./imgs/agreratorBox_li.png" alt="&#10004;"><p class="w-60"><span>Парковые автомобили:</span></p><div class="parkCar_Imgs" data-cars-id=\''+i+'\'></div></li></ul></div><div class="agregatorBox_agregators"><p class="agregatorBox_title">Агрегаторы</p><div class="agregatorBox_hr"></div><div class="row agregatorBox_agregatorsList" id="agregatorBox_agregatorsList" data-agregators-id=\''+i+'\'></div></div></div><input type="button" class="driverProfile_OrangeBtn max-w-275 mt-0 mb-5" value="Перейти"></div></a></div>');
							
							$chanelsContent = $(".agreratorBox_supportImgs[data-imgs-id='"+i+"']");
							for(j = 0; j < searchResultData[0][i][0].support_channels.length; j++)
								$chanelsContent.append("<img src='"+searchResultData[0][i][0].support_channels[j].logo_url+"' alt='"+searchResultData[0][i][0].support_channels[j].name+"'>");
							
							$cars = searchResultData[0][i].park_cars.split(";");
							if($cars[0] == "none")
								$(".parkCar_Imgs[data-cars-id='"+i+"']").append("<img src='./imgs/parkCar_no.png' alt='No'>");
							else
								$(".parkCar_Imgs[data-cars-id='"+i+"']").append("<img src='./imgs/parkCar_yes.png' alt='Yes'>");

							$agregatorsContent = $("#agregatorBox_agregatorsList[data-agregators-id='"+i+"']");
							for(j = 0; j < searchResultData[0][i][1].some_info_agregators.length; j++)
								$agregatorsContent.append("<div class='col30pr'><img src='"+searchResultData[0][i][1].some_info_agregators[j].logo_url+"' alt='"+searchResultData[0][i][1].some_info_agregators[j].name+"'></div>");
							
						}
					} else {
						searchRessultDiv.html("<p>По запросу <b>\"" + inputSearchData + "\" </b> нечего не найдено!</p>");
					}

					$("a").click(function () {
		                attrValue = $(this).attr('data-parnter-id');
		                if(attrValue != undefined) {
		                    $store.setItem("lastVisitPartner", attrValue);
		                }
		            });

		            retingUpdate();
				}).fail(function(xhr, textStatus, error) {
					modal_alert("Server error!", 2, "xhr.statusText: " + xhr.statusText + "<br>textStatus: " + textStatus + "<br>error: " + error + "<br>");
				});
			}
		});
	</script>

	<script type="text/javascript">
		$("#find_by_filter").click(function () {
			$("#find_by_filter").prop("disabled", true);

			var searchRessultDiv = $(".search_result");
			var countOfRecordComponent = $("#count-of-record");
			var contentDiv = $("#contentPartners");

			var filterData = {};

			var commissionData = [];
			var paySystems = [];
			var supportChannels = [];
			var ratingPartners = [];
			var parkCars = [];
			
			$.each($(".commission_data:checked"), function () { commissionData.push($(this).val()); });		
			$.each($(".pay_systems:checked"), function () { paySystems.push($(this).val()); });		
			$.each($(".support_channels:checked"), function () { supportChannels.push($(this).val()); });		
			$.each($(".rating_partners:checked"), function () { ratingPartners.push($(this).val()); });		
			$.each($(".park_cars:checked"), function () { parkCars.push($(this).val()); });		

			filterData.commissionData = commissionData;
			filterData.paySystems = paySystems;
			filterData.supportChannels = supportChannels;
			filterData.ratingPartners = ratingPartners;
			filterData.parkCars = parkCars;

			if(commissionData.length == 0) {
				modal_alert("", 1, "Должна быть выбрана хотя бы одна комиссия!", function () {
					$("#find_by_filter").prop("disabled", false);
				});
			} else if(paySystems.length == 0) {
				modal_alert("", 1, "Должна быть выбрана хотя бы одна система выплат!", function () {
					$("#find_by_filter").prop("disabled", false);
				});
			} else if(supportChannels.length == 0) {
				modal_alert("", 1, "Должен быть выбран хотя бы один канал тех. поддержки!", function () {
					$("#find_by_filter").prop("disabled", false);
				});
			} else {
				$('#modalFilter').modal('hide');
				$("#find_by_filter").prop("disabled", false);
			}

			$.post("http://taxitime.pro/api/MainData.php", { 
				filterData: JSON.stringify(filterData),
				agregatorId: $store.getItem("lastVisitAgregator")
			}).done(function (data) {
				console.log(data);
				
				var filterResultData = JSON.parse(data);
				contentDiv.html("");

				searchRessultDiv.css("display", "block");

				searchRessultDiv.html('<p>По Вашему запросу найдено <b id="count-of-record">#</b> партнёров</p>');
				countOfRecordComponent = $("#count-of-record");

				countOfRecordComponent.html(filterResultData[0].length);

				if(filterResultData[0].length != 0) { 
					for(i = 0; i < filterResultData[0].length; i++) {
						contentDiv.append('<div class="w-100 p-5"><a href="./info-about-partner.html" data-parnter-id='+filterResultData[0][i].id+'><div class="analyticsBox"><div class="w-100 d-flex align-items-center justify-content-between"><p class="agregatorBox_name">'+filterResultData[0][i].name+'</p><p class="agregatorBox_rating">Рейтинг: <span id="reting" class="reting">'+filterResultData[0][i].rating+'</span></p></div><div class="w-100 row justify-content-between p-10"><div class="agregatorBox_conditions"><p class="agregatorBox_title">Условия работы</p><div class="agregatorBox_hr"></div><ul><li><img class="w-9 h-10 mr-10 mt-3" src="./imgs/agreratorBox_li.png" alt="&#10004;"><p class="fw_bold fs_20"><span>Комиссия парка - </span>'+filterResultData[0][i].park_commission+' %</p></li><li><img class="w-9 h-10 mr-10" src="./imgs/agreratorBox_li.png" alt="&#10004;"><div><p><span>Выплаты:</span></p><ul><li><p>'+filterResultData[0][i].payment_types+'</p></li></ul></div></li><li class="d-flex flex-column"><div class="d-flex"><img class="w-9 h-10 mr-10" src="./imgs/agreratorBox_li.png" alt="&#10004;"><p><span>Каналы тех. поддержки:</span></p></div><div class="agreratorBox_supportImgs" data-imgs-id=\''+i+'\'></div></li><li><img class="w-9 h-10 mr-10" src="./imgs/agreratorBox_li.png" alt="&#10004;"><p class="w-60"><span>Парковые автомобили:</span></p><div class="parkCar_Imgs" data-cars-id=\''+i+'\'></div></li></ul></div><div class="agregatorBox_agregators"><p class="agregatorBox_title">Агрегаторы</p><div class="agregatorBox_hr"></div><div class="row agregatorBox_agregatorsList" id="agregatorBox_agregatorsList" data-agregators-id=\''+i+'\'></div></div></div><input type="button" class="driverProfile_OrangeBtn max-w-275 mt-0 mb-5" value="Перейти"></div></a></div>');
						
						$chanelsContent = $(".agreratorBox_supportImgs[data-imgs-id='"+i+"']");
						for(j = 0; j < filterResultData[0][i][0].support_channels.length; j++)
							$chanelsContent.append("<img src='"+filterResultData[0][i][0].support_channels[j].logo_url+"' alt='"+filterResultData[0][i][0].support_channels[j].name+"'>");
						
						$cars = filterResultData[0][i].park_cars.split(";");
						if($cars[0] == "none")
							$(".parkCar_Imgs[data-cars-id='"+i+"']").append("<img src='./imgs/parkCar_no.png' alt='No'>");
						else
							$(".parkCar_Imgs[data-cars-id='"+i+"']").append("<img src='./imgs/parkCar_yes.png' alt='Yes'>");

						$agregatorsContent = $("#agregatorBox_agregatorsList[data-agregators-id='"+i+"']");
						for(j = 0; j < filterResultData[0][i][1].some_info_agregators.length; j++)
							$agregatorsContent.append("<div class='col30pr'><img src='"+filterResultData[0][i][1].some_info_agregators[j].logo_url+"' alt='"+filterResultData[0][i][1].some_info_agregators[j].name+"'></div>");
						
					}
				} else {
					searchRessultDiv.html("<p>По выбраным Вами фильтрам нечего не найдено!</p>");
				}

				$("a").click(function () {
	                attrValue = $(this).attr('data-parnter-id');
	                if(attrValue != undefined) {
	                    $store.setItem("lastVisitPartner", attrValue);
	                }
	            });

	            retingUpdate();
			}).fail(function(xhr, textStatus, error) {
				modal_alert("Server error!", 2, "xhr.statusText: " + xhr.statusText + "<br>textStatus: " + textStatus + "<br>error: " + error + "<br>");
			});

		});
	</script>

	</body>
</html>